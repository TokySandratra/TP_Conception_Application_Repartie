<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Impression Commande <span th:text="${commande.name}"></span></title>
        <meta charset="UTF-8">
        <style>
            @media print {
                body { font-family: Arial, sans-serif; margin: 20px; }
                .no-print { display: none !important; }
                table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                th, td { border: 1px solid #333; padding: 8px; text-align: left; }
                th { background-color: #f0f0f0; font-weight: bold; }
                h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
                .total { font-size: 1.2em; font-weight: bold; text-align: right; }
            }
            @media screen {
                .print-btn { background: #007bff; color: white; padding: 10px 20px; border: none; cursor: pointer; }
            }
        </style>
    </head>
    <body>
        <div class="no-print">
            <h2>Prévisualisation impression</h2>
            <a th:href="@{/gestion/commandes/{id}(id=${commande.id})}">← Retour</a>
        </div>

        <!-- Contenu imprimable -->
        <header>
            <h1>FACTURE COMMANDE <span th:text="${commande.name}"></span></h1>
            <p><strong>Client :</strong> <span th:text="${commande.clientEmail}"></span></p>
            <p><strong>Référence :</strong> <span th:text="${commande.id}"></span></p>
        </header>

        <table>
            <thead>
            <tr>
                <th style="width: 50%;">Produit</th>
                <th style="width: 15%;">Qté</th>
                <th style="width: 15%;">Prix unitaire</th>
                <th style="width: 20%;">Total</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="ligne : ${commande.ligneCommandes}">
                <td th:text="${ligne.labelProduct}"></td>
                <td th:text="${ligne.quantity}"></td>
                <td style="text-align: right;" th:text="${ligne.priceUnit} + ' €'"></td>
                <td style="text-align: right;" th:text="${ligne.totalPrice} + ' €'"></td>
            </tr>
            <tr th:if="${commande.ligneCommandes.isEmpty()}">
                <td colspan="4" style="text-align:center; padding:20px;">
                    Aucune ligne de commande
                </td>
            </tr>
            </tbody>
            <tfoot>
            <tr style="font-weight: bold; font-size: 1.1em;">
                <td colspan="3" style="text-align: right;">TOTAL :</td>
                <td style="text-align: right;" th:text="${totalCommande} + ' €'">
                    0.00 €
                </td>
            </tr>
            </tfoot>
        </table>

        <div class="no-print" style="margin-top: 30px;">
            <button class="print-btn" onclick="window.print()">Imprimer maintenant</button>
        </div>
        <a th:href="@{/gestion/commandes/{id}(id=${commande.id})}">← Modifier commande</a>
    </body>
</html>
